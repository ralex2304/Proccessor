;Signature: KU
;Version: 1
;line | addr | command
;   1 | 0004 |                                                          | ; Recursive factorial calculation
;   2 | 0004 |                                                          | 
;   3 | 0004 | 0B 04 73 00 00 00 00 00 00 00                            | call regs_clean (115)
;   4 | 0014 |                                                          | 
;   5 | 0014 | 10 00                                                    | in
;   6 | 0016 | 02 01 00                                                 | pop rax
;   7 | 0019 |                                                          | 
;   8 | 0019 | 0B 04 24 00 00 00 00 00 00 00                            | call calc (36) ;(rax = target) return rcx
;   9 | 0029 |                                                          | 
;  10 | 0029 | 01 01 02                                                 | push rcx
;  11 | 0032 | 11 00                                                    | out
;  12 | 0034 |                                                          | 
;  13 | 0034 |                                                          | exit:
;  14 | 0034 | 00 00                                                    | hlt
;  15 | 0036 |                                                          | 
;  16 | 0036 |                                                          | ;===========================================================
;  17 | 0036 |                                                          | 
;  18 | 0036 |                                                          | ; recursive calc function
;  19 | 0036 |                                                          | ; calc(rax - target, rbx = 0 - iterator, rcx - result = 1)
;  20 | 0036 |                                                          | calc: ;iterator and result init
;  21 | 0036 |                                                          | 
;  22 | 0036 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  23 | 0046 | 02 01 01                                                 | pop rbx
;  24 | 0049 | 01 02 00 00 00 00 00 00 F0 3F                            | push 1.000000
;  25 | 0059 | 02 01 02                                                 | pop rcx
;  26 | 0062 |                                                          | 
;  27 | 0062 |                                                          | calc_loop: ;func body
;  28 | 0062 |                                                          | 
;  29 | 0062 | 01 01 00                                                 | push rax ;target
;  30 | 0065 | 01 01 01                                                 | push rbx ;iterator
;  31 | 0068 | 07 04 71 00 00 00 00 00 00 00                            | jbe calc_ret (113) ; if (target <= iterator) return;
;  32 | 0078 |                                                          | 
;  33 | 0078 |                                                          | ;iterator increment
;  34 | 0078 | 01 03 01 00 00 00 00 00 00 F0 3F                         | push rbx+1.000000
;  35 | 0089 | 02 01 01                                                 | pop rbx
;  36 | 0092 |                                                          | 
;  37 | 0092 | 01 01 02                                                 | push rcx
;  38 | 0095 | 01 01 01                                                 | push rbx
;  39 | 0098 | 14 00                                                    | mul ;result * iterator
;  40 | 0100 | 02 01 02                                                 | pop rcx ;write result
;  41 | 0103 |                                                          | 
;  42 | 0103 | 0B 04 3E 00 00 00 00 00 00 00                            | call calc_loop (62) ;recursive call
;  43 | 0113 |                                                          | 
;  44 | 0113 |                                                          | calc_ret:
;  45 | 0113 | 0C 00                                                    | ret
;  46 | 0115 |                                                          | 
;  47 | 0115 |                                                          | ;===========================================================
;  48 | 0115 |                                                          | 
;  49 | 0115 |                                                          | ; Registers cleaning function
;  50 | 0115 |                                                          | regs_clean:
;  51 | 0115 |                                                          | 
;  52 | 0115 | 0B 04 9D 00 00 00 00 00 00 00                            | call rax_clean (157)
;  53 | 0125 | 0B 04 AC 00 00 00 00 00 00 00                            | call rbx_clean (172)
;  54 | 0135 | 0B 04 BB 00 00 00 00 00 00 00                            | call rcx_clean (187)
;  55 | 0145 | 0B 04 CA 00 00 00 00 00 00 00                            | call rdx_clean (202)
;  56 | 0155 |                                                          | 
;  57 | 0155 | 0C 00                                                    | ret
;  58 | 0157 |                                                          | 
;  59 | 0157 |                                                          | ;===========================================================
;  60 | 0157 |                                                          | 
;  61 | 0157 |                                                          | rax_clean:
;  62 | 0157 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  63 | 0167 | 02 01 00                                                 | pop rax
;  64 | 0170 | 0C 00                                                    | ret
;  65 | 0172 |                                                          | 
;  66 | 0172 |                                                          | rbx_clean:
;  67 | 0172 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  68 | 0182 | 02 01 01                                                 | pop rbx
;  69 | 0185 | 0C 00                                                    | ret
;  70 | 0187 |                                                          | 
;  71 | 0187 |                                                          | rcx_clean:
;  72 | 0187 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  73 | 0197 | 02 01 02                                                 | pop rcx
;  74 | 0200 | 0C 00                                                    | ret
;  75 | 0202 |                                                          | 
;  76 | 0202 |                                                          | rdx_clean:
;  77 | 0202 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  78 | 0212 | 02 01 03                                                 | pop rdx
;  79 | 0215 | 0C 00                                                    | ret
