;Signature: KU
;Version: 1
;line | addr | command
;   1 | 0004 |                                                          | ;Quad equations solver
;   2 | 0004 |                                                          | 
;   3 | 0004 | 10 00                                                    | in
;   4 | 0006 | 10 00                                                    | in
;   5 | 0008 | 10 00                                                    | in
;   6 | 0010 |                                                          | 
;   7 | 0010 |                                                          | ;rax = 0 | rbx = 0 | rcx = 0 | rdx = 0 | stk: a, b, c
;   8 | 0010 |                                                          | 
;   9 | 0010 | 02 01 03                                                 | pop rdx
;  10 | 0013 | 02 01 02                                                 | pop rcx
;  11 | 0016 | 02 01 01                                                 | pop rbx
;  12 | 0019 |                                                          | 
;  13 | 0019 |                                                          | ;rax = 0 | rbx = a | rcx = b | rdx = c | stk:
;  14 | 0019 |                                                          | 
;  15 | 0019 | 01 01 01                                                 | push rbx
;  16 | 0022 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  17 | 0032 | 09 04 44 00 00 00 00 00 00 00                            | jne main_not_lin (68)
;  18 | 0042 |                                                          | 
;  19 | 0042 | 01 01 02                                                 | push rcx
;  20 | 0045 | 01 01 03                                                 | push rdx
;  21 | 0048 |                                                          | 
;  22 | 0048 |                                                          | ;rax = 0 | rbx = a | rcx = b | rdx = c | stk: b, c
;  23 | 0048 |                                                          | 
;  24 | 0048 | 0B 04 63 00 00 00 00 00 00 00                            | call solve_lin (99)
;  25 | 0058 |                                                          | 
;  26 | 0058 | 03 04 61 00 00 00 00 00 00 00                            | jmp exit (97)
;  27 | 0068 |                                                          | 
;  28 | 0068 |                                                          | main_not_lin:
;  29 | 0068 |                                                          | 
;  30 | 0068 | 01 01 01                                                 | push rbx
;  31 | 0071 | 01 01 02                                                 | push rcx
;  32 | 0074 | 01 01 03                                                 | push rdx
;  33 | 0077 |                                                          | 
;  34 | 0077 |                                                          | ;rax = 0 | rbx = a | rcx = b | rdx = c | stk: a, b, c
;  35 | 0077 |                                                          | 
;  36 | 0077 | 0B 04 C5 00 00 00 00 00 00 00                            | call solve_quad (197)
;  37 | 0087 |                                                          | 
;  38 | 0087 | 03 04 61 00 00 00 00 00 00 00                            | jmp exit (97)
;  39 | 0097 |                                                          | 
;  40 | 0097 |                                                          | 
;  41 | 0097 |                                                          | 
;  42 | 0097 |                                                          | exit:
;  43 | 0097 | 00 00                                                    | hlt
;  44 | 0099 |                                                          | 
;  45 | 0099 |                                                          | ;================================= methods =====================================
;  46 | 0099 |                                                          | 
;  47 | 0099 |                                                          | ; uses rax, rbx, rcx
;  48 | 0099 |                                                          | ; (stk: b, c)
;  49 | 0099 |                                                          | solve_lin: ; x = -c / b
;  50 | 0099 | 02 01 00                                                 | pop rax
;  51 | 0102 |                                                          | 
;  52 | 0102 | 02 01 01                                                 | pop rbx
;  53 | 0105 | 02 01 02                                                 | pop rcx
;  54 | 0108 |                                                          | 
;  55 | 0108 |                                                          | ; rax = addr | rbx = b | rcx = c | rdx = ? | stk: ...,
;  56 | 0108 |                                                          | 
;  57 | 0108 | 01 01 01                                                 | push rbx
;  58 | 0111 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
;  59 | 0121 | 09 04 94 00 00 00 00 00 00 00                            | jne solve_lin_continue (148)
;  60 | 0131 |                                                          | 
;  61 | 0131 | 01 02 00 00 00 00 00 00 F0 BF                            | push -1.000000
;  62 | 0141 | 11 00                                                    | out
;  63 | 0143 |                                                          | 
;  64 | 0143 | 01 01 00                                                 | push rax
;  65 | 0146 | 0C 00                                                    | ret
;  66 | 0148 |                                                          | 
;  67 | 0148 |                                                          | solve_lin_continue:
;  68 | 0148 |                                                          | 
;  69 | 0148 | 01 01 02                                                 | push rcx
;  70 | 0151 | 01 02 00 00 00 00 00 00 F0 BF                            | push -1.000000
;  71 | 0161 | 14 00                                                    | mul
;  72 | 0163 |                                                          | 
;  73 | 0163 | 01 01 01                                                 | push rbx
;  74 | 0166 | 15 00                                                    | div
;  75 | 0168 |                                                          | 
;  76 | 0168 | 01 02 00 00 00 00 00 00 F0 3F                            | push 1.000000
;  77 | 0178 | 11 00                                                    | out
;  78 | 0180 |                                                          | 
;  79 | 0180 | 0B 04 D1 01 00 00 00 00 00 00                            | call check_minus_zero (465)
;  80 | 0190 | 11 00                                                    | out
;  81 | 0192 |                                                          | 
;  82 | 0192 | 01 01 00                                                 | push rax
;  83 | 0195 | 0C 00                                                    | ret
;  84 | 0197 |                                                          | 
;  85 | 0197 |                                                          | ;-------------------------------------------------------------------------------
;  86 | 0197 |                                                          | 
;  87 | 0197 |                                                          | ; uses rax, rbx, rcx, rdx!!!
;  88 | 0197 |                                                          | ; (stk: a, b, c)
;  89 | 0197 |                                                          | solve_quad:
;  90 | 0197 | 02 01 03                                                 | pop rdx
;  91 | 0200 |                                                          | 
;  92 | 0200 | 02 01 02                                                 | pop rcx
;  93 | 0203 | 02 01 01                                                 | pop rbx
;  94 | 0206 | 02 01 00                                                 | pop rax
;  95 | 0209 |                                                          | 
;  96 | 0209 | 01 01 03                                                 | push rdx
;  97 | 0212 |                                                          | 
;  98 | 0212 |                                                          | ; rax = a | rbx = b | rcx = c | rdx = addr | stk: ..., addr
;  99 | 0212 |                                                          | 
; 100 | 0212 | 01 01 01                                                 | push rbx
; 101 | 0215 | 01 01 01                                                 | push rbx
; 102 | 0218 | 14 00                                                    | mul
; 103 | 0220 |                                                          | 
; 104 | 0220 | 01 02 00 00 00 00 00 00 10 C0                            | push -4.000000
; 105 | 0230 | 01 01 00                                                 | push rax
; 106 | 0233 | 01 01 02                                                 | push rcx
; 107 | 0236 | 14 00                                                    | mul
; 108 | 0238 | 14 00                                                    | mul
; 109 | 0240 |                                                          | 
; 110 | 0240 | 12 00                                                    | add
; 111 | 0242 |                                                          | 
; 112 | 0242 |                                                          | ; rax = a | rbx = b | rcx = c | rdx = addr | stk: ..., addr, b*b - 4*a*c
; 113 | 0242 |                                                          | 
; 114 | 0242 | 02 01 03                                                 | pop rdx
; 115 | 0245 |                                                          | 
; 116 | 0245 |                                                          | ; rax = a | rbx = b | rcx = c | rdx = D | stk: ..., addr,
; 117 | 0245 |                                                          | 
; 118 | 0245 | 01 01 03                                                 | push rdx
; 119 | 0248 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
; 120 | 0258 | 06 04 95 01 00 00 00 00 00 00                            | jb solve_quad_no_sols (405)
; 121 | 0268 |                                                          | 
; 122 | 0268 | 01 01 03                                                 | push rdx
; 123 | 0271 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
; 124 | 0281 | 08 04 A3 01 00 00 00 00 00 00                            | je solve_quad_one_sol (419)
; 125 | 0291 |                                                          | 
; 126 | 0291 |                                                          | ; two solutions:
; 127 | 0291 |                                                          | 
; 128 | 0291 |                                                          | ; rax = a | rbx = b | rcx = c | rdx = D | stk: ..., addr,
; 129 | 0291 |                                                          | 
; 130 | 0291 | 01 01 03                                                 | push rdx
; 131 | 0294 | 16 00                                                    | sqrt
; 132 | 0296 | 02 01 03                                                 | pop rdx
; 133 | 0299 |                                                          | 
; 134 | 0299 | 01 01 01                                                 | push rbx
; 135 | 0302 | 01 02 00 00 00 00 00 00 F0 BF                            | push -1.000000
; 136 | 0312 | 14 00                                                    | mul
; 137 | 0314 | 02 01 01                                                 | pop rbx
; 138 | 0317 |                                                          | 
; 139 | 0317 |                                                          | ; rax = a | rbx = -b | rcx = c | rdx = sqrt(D) | stk: ..., addr,
; 140 | 0317 |                                                          | 
; 141 | 0317 | 01 01 01                                                 | push rbx
; 142 | 0320 | 01 01 03                                                 | push rdx
; 143 | 0323 | 12 00                                                    | add
; 144 | 0325 |                                                          | 
; 145 | 0325 | 01 02 00 00 00 00 00 00 00 40                            | push 2.000000
; 146 | 0335 | 01 01 00                                                 | push rax
; 147 | 0338 | 14 00                                                    | mul
; 148 | 0340 |                                                          | 
; 149 | 0340 | 15 00                                                    | div
; 150 | 0342 |                                                          | 
; 151 | 0342 |                                                          | ; rax = a | rbx = -b | rcx = c | rdx = sqrt(D) | stk: ..., addr, x1
; 152 | 0342 |                                                          | 
; 153 | 0342 | 01 01 01                                                 | push rbx
; 154 | 0345 | 01 01 03                                                 | push rdx
; 155 | 0348 | 13 00                                                    | sub
; 156 | 0350 |                                                          | 
; 157 | 0350 | 01 02 00 00 00 00 00 00 00 40                            | push 2.000000
; 158 | 0360 | 01 01 00                                                 | push rax
; 159 | 0363 | 14 00                                                    | mul
; 160 | 0365 |                                                          | 
; 161 | 0365 | 15 00                                                    | div
; 162 | 0367 |                                                          | 
; 163 | 0367 |                                                          | ; rax = a | rbx = -b | rcx = c | rdx = sqrt(D) | stk: ..., addr, x1, x2
; 164 | 0367 |                                                          | 
; 165 | 0367 | 01 02 00 00 00 00 00 00 00 40                            | push 2.000000
; 166 | 0377 | 11 00                                                    | out
; 167 | 0379 |                                                          | 
; 168 | 0379 | 0B 04 D1 01 00 00 00 00 00 00                            | call check_minus_zero (465)
; 169 | 0389 | 11 00                                                    | out
; 170 | 0391 |                                                          | 
; 171 | 0391 | 0B 04 D1 01 00 00 00 00 00 00                            | call check_minus_zero (465)
; 172 | 0401 | 11 00                                                    | out
; 173 | 0403 |                                                          | 
; 174 | 0403 | 0C 00                                                    | ret
; 175 | 0405 |                                                          | 
; 176 | 0405 |                                                          | solve_quad_no_sols:
; 177 | 0405 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
; 178 | 0415 | 11 00                                                    | out
; 179 | 0417 |                                                          | 
; 180 | 0417 | 0C 00                                                    | ret
; 181 | 0419 |                                                          | 
; 182 | 0419 |                                                          | solve_quad_one_sol:
; 183 | 0419 | 01 01 01                                                 | push rbx
; 184 | 0422 | 01 01 00                                                 | push rax
; 185 | 0425 | 01 02 00 00 00 00 00 00 00 C0                            | push -2.000000
; 186 | 0435 | 14 00                                                    | mul
; 187 | 0437 | 15 00                                                    | div
; 188 | 0439 |                                                          | 
; 189 | 0439 | 01 02 00 00 00 00 00 00 F0 3F                            | push 1.000000
; 190 | 0449 | 11 00                                                    | out
; 191 | 0451 |                                                          | 
; 192 | 0451 | 0B 04 D1 01 00 00 00 00 00 00                            | call check_minus_zero (465)
; 193 | 0461 |                                                          | 
; 194 | 0461 | 11 00                                                    | out
; 195 | 0463 |                                                          | 
; 196 | 0463 | 0C 00                                                    | ret
; 197 | 0465 |                                                          | 
; 198 | 0465 |                                                          | 
; 199 | 0465 |                                                          | ; uses rbx, rcx!!!
; 200 | 0465 |                                                          | ; (stk: x)
; 201 | 0465 |                                                          | check_minus_zero:
; 202 | 0465 | 02 01 01                                                 | pop rbx
; 203 | 0468 |                                                          | 
; 204 | 0468 | 02 01 02                                                 | pop rcx
; 205 | 0471 |                                                          | 
; 206 | 0471 |                                                          | ; rax = * | rbx = addr | rcx = x | rdx = ? | stk: ...,
; 207 | 0471 |                                                          | 
; 208 | 0471 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
; 209 | 0481 | 01 01 02                                                 | push rcx
; 210 | 0484 | 09 04 FD 01 00 00 00 00 00 00                            | jne ret_non_zero (509)
; 211 | 0494 |                                                          | ; ret zero
; 212 | 0494 | 01 02 00 00 00 00 00 00 00 00                            | push 0.000000
; 213 | 0504 |                                                          | 
; 214 | 0504 | 01 01 01                                                 | push rbx
; 215 | 0507 | 0C 00                                                    | ret
; 216 | 0509 |                                                          | 
; 217 | 0509 |                                                          | ret_non_zero:
; 218 | 0509 | 01 01 02                                                 | push rcx
; 219 | 0512 |                                                          | 
; 220 | 0512 | 01 01 01                                                 | push rbx
; 221 | 0515 | 0C 00                                                    | ret
